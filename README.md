<div align="center">

# ğŸŒŠ Underwater Image Processing System (UIPS)

**æ°´ä¸‹å›¾åƒå¤„ç†ç³»ç»Ÿ - åŸºäº .NET 8 çš„é«˜æ€§èƒ½æ¨¡å—åŒ–å•ä½“åº”ç”¨**

[![CI/CD Pipeline](https://github.com/ekkure/UnderwaterImageProcessingSystem/workflows/CI%2FCD%20Pipeline/badge.svg)](https://github.com/ekkure/UnderwaterImageProcessingSystem/actions)
[![.NET Version](https://img.shields.io/badge/.NET-8.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)


</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

UIPS (Underwater Image Processing System) æ˜¯ä¸€ä¸ªä¸“ä¸ºæ°´ä¸‹å›¾åƒæ•°æ®ç®¡ç†ä¸å¤„ç†è®¾è®¡çš„é›†æˆåŒ–è§£å†³æ–¹æ¡ˆã€‚é¡¹ç›®é‡‡ç”¨ **æ¨¡å—åŒ–å•ä½“æ¶æ„ (Modular Monolith)**ï¼Œåœ¨ä¿æŒå•ä½“åº”ç”¨éƒ¨ç½²ä¾¿æ·æ€§çš„åŒæ—¶ï¼Œé€šè¿‡ä¸¥æ ¼çš„æ¨¡å—è¾¹ç•Œå®ç°é«˜å†…èšã€ä½è€¦åˆçš„ä»£ç ç»„ç»‡ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **æ¨¡å—åŒ–å•ä½“æ¶æ„** - æ¸…æ™°çš„ä»£ç è¾¹ç•Œï¼Œæ˜“äºç»´æŠ¤ä¸æ‰©å±•
- ğŸ” **JWT èº«ä»½è®¤è¯** - åŸºäº Token çš„å®‰å…¨è®¤è¯æœºåˆ¶
- ï¿½ **ç±»å‹å®‰ å…¨é€šä¿¡** - å‰åç«¯é€šè¿‡ DTO å®ç°å¼ºç±»å‹åä½œ
- ğŸ¨ **ç°ä»£åŒ– UI** - Material Design é£æ ¼çš„æ·±æµ·ä¸»é¢˜ç•Œé¢
- ğŸš€ **é«˜æ€§èƒ½å­˜å‚¨** - SQLite æ•°æ®åº“ + æ–‡ä»¶ç³»ç»Ÿæ··åˆå­˜å‚¨
- ğŸ”„ **è‡ªåŠ¨åŒ– CI/CD** - GitHub Actions æŒç»­é›†æˆä¸éƒ¨ç½²

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ¶æ„æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UIPS.Client (WPF)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Views   â”‚   â”‚ViewModelsâ”‚   â”‚ Services (Refit)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTPS/REST
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   UIPS.API (ASP.NET Core)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Controllersâ”‚  â”‚ Services â”‚  â”‚   DTOs   â”‚  â”‚ Models â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                              â”‚
â”‚                          â–¼                              â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚  EF Core + SQLite  â”‚                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### åç«¯ (Backend)
- **æ¡†æ¶**: ASP.NET Core 8.0 Web API
- **ORM**: Entity Framework Core 8.0
- **æ•°æ®åº“**: SQLite 3
- **è®¤è¯**: JWT Bearer Authentication
- **å¯†ç åŠ å¯†**: BCrypt.Net-Next 4.0.3
- **API æ–‡æ¡£**: Swashbuckle (Swagger/OpenAPI)

#### å‰ç«¯ (Frontend)
- **æ¡†æ¶**: WPF (.NET 8.0-windows)
- **MVVM**: CommunityToolkit.Mvvm 8.4.0
- **UI åº“**: MaterialDesignThemes 5.3.0
- **HTTP å®¢æˆ·ç«¯**: Refit 8.0.0
- **ä¾èµ–æ³¨å…¥**: Microsoft.Extensions.Hosting 10.0.0

#### å¼€å‘å·¥å…·
- **IDE**: Visual Studio 2022 (v17.8+)
- **ç‰ˆæœ¬æ§åˆ¶**: Git + GitHub
- **CI/CD**: GitHub Actions

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

### è§£å†³æ–¹æ¡ˆç»„ç»‡

```
UnderwaterImageProcessingSystem/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ UIPS.API/                    # åç«¯ API é¡¹ç›®
â”‚   â”‚   â”œâ”€â”€ Controllers/             # API æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.cs    # è®¤è¯æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ ImageController.cs   # å›¾åƒç®¡ç†æ¥å£
â”‚   â”‚   â”œâ”€â”€ DTOs/                    # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginRequestDto.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginResponseDto.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageDto.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageResponseDto.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ PaginatedRequestDto.cs
â”‚   â”‚   â”‚   â””â”€â”€ PaginatedResult.cs
â”‚   â”‚   â”œâ”€â”€ Models/                  # æ•°æ®åº“å®ä½“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Services/                # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ Migrations/              # EF Core è¿ç§»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Program.cs               # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ appsettings.json         # é…ç½®æ–‡ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ UIPS.Client/                 # å‰ç«¯ WPF é¡¹ç›®
â”‚       â”œâ”€â”€ Views/                   # XAML è§†å›¾
â”‚       â”œâ”€â”€ ViewModels/              # è§†å›¾æ¨¡å‹
â”‚       â”œâ”€â”€ Services/                # HTTP æœåŠ¡ (Refit)
â”‚       â”œâ”€â”€ Converters/              # å€¼è½¬æ¢å™¨
â”‚       â”œâ”€â”€ Resources/               # æ ·å¼ä¸èµ„æº
â”‚       â”œâ”€â”€ App.xaml                 # åº”ç”¨ç¨‹åºå®šä¹‰
â”‚       â””â”€â”€ MainWindow.xaml          # ä¸»çª—å£
â”‚
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ UIPS.API.Tests/              # å•å…ƒæµ‹è¯•é¡¹ç›®
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/                   # CI/CD å·¥ä½œæµ
â”‚       â”œâ”€â”€ ci-cd.yml                # ä¸»æµæ°´çº¿
â”‚       â””â”€â”€ pr-check.yml             # PR æ£€æŸ¥
â”‚
â”œâ”€â”€ UIPS.sln                         # Visual Studio è§£å†³æ–¹æ¡ˆ
â””â”€â”€ README.md                        # é¡¹ç›®æ–‡æ¡£
```

### æ¨¡å—èŒè´£åˆ’åˆ†

| æ¨¡å— | é¡¹ç›® | èŒè´£ |
|------|------|------|
| **Backend** | `UIPS.API` | RESTful API æœåŠ¡ã€æ•°æ®æŒä¹…åŒ–ã€ä¸šåŠ¡é€»è¾‘ã€JWT è®¤è¯ |
| **Frontend** | `UIPS.Client` | ç”¨æˆ·ç•Œé¢ã€MVVM æ¶æ„ã€HTTP é€šä¿¡ã€çŠ¶æ€ç®¡ç† |
| **Tests** | `UIPS.API.Tests` | å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€API æµ‹è¯• |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11 (æ¨è) æˆ– macOS/Linux (éœ€è°ƒæ•´ WPF éƒ¨åˆ†)
- **IDE**: Visual Studio 2022 (v17.8 æˆ–æ›´é«˜ç‰ˆæœ¬)
- **.NET SDK**: [.NET 8.0 SDK](https://dotnet.microsoft.com/download/dotnet/8.0)
- **Git**: ç”¨äºç‰ˆæœ¬æ§åˆ¶

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/ekkure/UnderwaterImageProcessingSystem.git
cd UnderwaterImageProcessingSystem
```

#### 2. è¿˜åŸä¾èµ–

```bash
dotnet restore
```

#### 3. æ•°æ®åº“åˆå§‹åŒ–

é¡¹ç›®ä½¿ç”¨ SQLiteï¼Œæ•°æ®åº“æ–‡ä»¶ä¼šåœ¨é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºå¹¶è¿ç§»ã€‚æ— éœ€æ‰‹åŠ¨é…ç½®ã€‚

#### 4. é…ç½®å¯åŠ¨é¡¹ç›®

åœ¨ Visual Studio ä¸­ï¼š
1. å³é”®ç‚¹å‡»è§£å†³æ–¹æ¡ˆ â†’ **è®¾ç½®å¯åŠ¨é¡¹ç›®**
2. é€‰æ‹© **å¤šä¸ªå¯åŠ¨é¡¹ç›®**
3. å°† `UIPS.API` å’Œ `UIPS.Client` è®¾ç½®ä¸º **å¯åŠ¨**

#### 5. è¿è¡Œé¡¹ç›®

æŒ‰ `F5` æˆ–ç‚¹å‡» **å¯åŠ¨** æŒ‰é’®ï¼š
- **åç«¯**: å°†åœ¨ `https://localhost:7xxx` å¯åŠ¨ï¼ŒSwagger UI è‡ªåŠ¨æ‰“å¼€
- **å‰ç«¯**: WPF åº”ç”¨ç¨‹åºçª—å£å°†å¯åŠ¨

### é»˜è®¤è´¦æˆ·

é¦–æ¬¡è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ï¼š
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

>  **å®‰å…¨æç¤º**: ç”Ÿäº§ç¯å¢ƒè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

---

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®é…ç½®

#### åç«¯é…ç½® (`appsettings.json`)

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=uips.db"
  },
  "Jwt": {
    "Key": "your-secret-key-here",
    "Issuer": "UIPS.API",
    "Audience": "UIPS.Client",
    "ExpiryMinutes": 60
  },
  "FileStorage": {
    "BasePath": "wwwroot/uploads"
  }
}
```

#### å‰ç«¯é…ç½® (App.xaml.cs)

```csharp
services.AddRefitClient<IUipsApiService>()
    .ConfigureHttpClient(c => c.BaseAddress = new Uri("https://localhost:7xxx"));
```

### æ•°æ®åº“è¿ç§»

```bash
# æ·»åŠ æ–°è¿ç§»
dotnet ef migrations add MigrationName --project src/UIPS.API

# æ›´æ–°æ•°æ®åº“
dotnet ef database update --project src/UIPS.API

# å›æ»šè¿ç§»
dotnet ef database update PreviousMigrationName --project src/UIPS.API
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
dotnet test

# è¿è¡Œç‰¹å®šé¡¹ç›®æµ‹è¯•
dotnet test tests/UIPS.API.Tests

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
dotnet test --collect:"XPlat Code Coverage"
```

---

## ğŸ¨ UI è®¾è®¡è§„èŒƒ

### Deep Ocean Palette (æ·±æµ·ä¸»é¢˜)

é¡¹ç›®é‡‡ç”¨æ·±æµ·é…è‰²æ–¹æ¡ˆï¼Œè¥é€ ä¸“ä¸šçš„æ°´ä¸‹ç¯å¢ƒæ°›å›´ï¼š

- **ä¸»è‰²è°ƒ**: `#0D47A1` (æ·±æµ·è“)
- **æ¬¡è¦è‰²**: `#1976D2` (æµ·æ´‹è“)
- **å¼ºè°ƒè‰²**: `#00BCD4` (é’è‰²)
- **èƒŒæ™¯è‰²**: `#263238` (æ·±ç°è“)
- **æ–‡æœ¬è‰²**: `#ECEFF1` (æµ…ç°ç™½)

### èµ„æºå¼•ç”¨é¡ºåº

`App.xaml` ä¸­çš„èµ„æºå­—å…¸åˆå¹¶é¡ºåº**ä¸¥ç¦ä¿®æ”¹**ï¼š

```xml
<ResourceDictionary.MergedDictionaries>
    <materialDesign:BundledTheme BaseTheme="Dark" ... />
    <ResourceDictionary Source="Resources/Colors.xaml" />
    <ResourceDictionary Source="Resources/Styles.xaml" />
</ResourceDictionary.MergedDictionaries>
```

---

## ğŸ“œ å¼€å‘è§„èŒƒ

### Git å·¥ä½œæµ

æœ¬é¡¹ç›®é‡‡ç”¨ **Git Flow** åˆ†æ”¯ç­–ç•¥ï¼š

```
main (ç”Ÿäº§åˆ†æ”¯)
  â†‘
develop (å¼€å‘åˆ†æ”¯)
  â†‘
feature/xxx (åŠŸèƒ½åˆ†æ”¯)
hotfix/xxx (çƒ­ä¿®å¤åˆ†æ”¯)
```

#### åˆ†æ”¯å‘½åè§„èŒƒ

- **åŠŸèƒ½å¼€å‘**: `feature/åŠŸèƒ½åç§°` (ä¾‹: `feature/image-upload`)
- **Bug ä¿®å¤**: `bugfix/é—®é¢˜æè¿°` (ä¾‹: `bugfix/login-error`)
- **çƒ­ä¿®å¤**: `hotfix/ç´§æ€¥é—®é¢˜` (ä¾‹: `hotfix/security-patch`)
- **å‘å¸ƒå‡†å¤‡**: `release/ç‰ˆæœ¬å·` (ä¾‹: `release/v1.0.0`)

#### æäº¤ä¿¡æ¯è§„èŒƒ

éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**ç±»å‹ (type)**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·é“¾æ›´æ–°

**ç¤ºä¾‹**:
```
feat(api): æ·»åŠ å›¾åƒæ‰¹é‡ä¸Šä¼ æ¥å£

- å®ç°å¤šæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- æ·»åŠ æ–‡ä»¶å¤§å°éªŒè¯
- æ›´æ–° Swagger æ–‡æ¡£

Closes #123
```

### ä»£ç å®¡æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆ C# ç¼–ç è§„èŒƒ
- [ ] æ‰€æœ‰å…¬å…± API éƒ½æœ‰ XML æ–‡æ¡£æ³¨é‡Š
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] æ— ç¼–è¯‘è­¦å‘Š
- [ ] é€šè¿‡æ‰€æœ‰ CI æ£€æŸ¥
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£

---

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

1. **æ•æ„Ÿä¿¡æ¯ç®¡ç†**
   - ä½¿ç”¨ User Secrets å­˜å‚¨å¼€å‘ç¯å¢ƒå¯†é’¥
   - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¯å¢ƒå˜é‡æˆ– Azure Key Vault

2. **JWT é…ç½®**
   - å¯†é’¥é•¿åº¦è‡³å°‘ 256 ä½
   - è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´
   - ä½¿ç”¨ HTTPS ä¼ è¾“

3. **æ–‡ä»¶ä¸Šä¼ **
   - éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°
   - ä½¿ç”¨éšæœºæ–‡ä»¶åé˜²æ­¢è·¯å¾„éå†
   - é™åˆ¶ä¸Šä¼ é¢‘ç‡

4. **æ•°æ®åº“å®‰å…¨**
   - ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢ SQL æ³¨å…¥
   - å®šæœŸå¤‡ä»½æ•°æ®åº“
   - æ•æ„Ÿå­—æ®µåŠ å¯†å­˜å‚¨

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•é‡‘å­—å¡”

```
        /\
       /  \  E2E Tests (å°‘é‡)
      /â”€â”€â”€â”€\
     /      \ Integration Tests (é€‚é‡)
    /â”€â”€â”€â”€â”€â”€â”€â”€\
   /          \ Unit Tests (å¤§é‡)
  /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\
```

### æµ‹è¯•è¦†ç›–ç›®æ ‡

- **å•å…ƒæµ‹è¯•**: è¦†ç›–ç‡ > 80%
- **é›†æˆæµ‹è¯•**: è¦†ç›–æ ¸å¿ƒä¸šåŠ¡æµç¨‹
- **E2E æµ‹è¯•**: è¦†ç›–å…³é”®ç”¨æˆ·åœºæ™¯

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- **æ•°æ®åº“ç´¢å¼•**: ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- **åˆ†é¡µæŸ¥è¯¢**: ä½¿ç”¨ `PaginatedResult<T>` é¿å…å¤§æ•°æ®é›†åŠ è½½
- **å¼‚æ­¥ç¼–ç¨‹**: æ‰€æœ‰ I/O æ“ä½œä½¿ç”¨ `async/await`
- **ç¼“å­˜ç­–ç•¥**: å¯¹é™æ€èµ„æºå’Œé¢‘ç¹è®¿é—®æ•°æ®å¯ç”¨ç¼“å­˜
- **å›¾åƒä¼˜åŒ–**: è‡ªåŠ¨å‹ç¼©ä¸Šä¼ å›¾åƒï¼Œç”Ÿæˆç¼©ç•¥å›¾

---

