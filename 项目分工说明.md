# UIPS 项目分工说明

## 项目概述

水下图像处理系统（UIPS）采用前后端分离架构，后端使用 ASP.NET Core Web API，前端使用 WPF 桌面客户端。

---

## 成员分工

### 组长

**职责：项目架构与技术选型**

| 工作内容 | 具体说明 |
|---------|---------|
| 架构搭建与选择 | 确定前后端分离架构，后端 RESTful API + 前端 WPF 客户端 |
| 技术栈选择 | .NET 8.0、ASP.NET Core、WPF、Entity Framework Core、SQLite |
| 库选择 | Material Design In XAML（UI）、CommunityToolkit.Mvvm（MVVM）、Refit（HTTP）、BCrypt（加密）|
| 代码框架搭建 | 创建解决方案结构、配置项目依赖、搭建基础代码骨架 |
| 接口设计 | 设计 RESTful API 规范，定义各模块接口路由和参数 |
| 数据模型设计 | 设计 User、Image、Favourite 实体模型及数据库关系 |

**涉及文件：**
- `UIPS.sln` - 解决方案配置
- `src/UIPS.API/Program.cs` - 后端启动配置
- `src/UIPS.API/Models/` - 数据模型定义
- `src/UIPS.API/DTOs/` - 数据传输对象设计
- `src/UIPS.Client/App.xaml.cs` - 前端 DI 容器配置

---

### ekkure

**职责：后端业务逻辑与 DevOps**

| 工作内容 | 具体说明 |
|---------|---------|
| 用户认证模块 | 实现 `AuthController` 登录/注册接口，JWT Token 生成与验证，BCrypt 密码加密 |
| 图片管理模块 | 实现 `ImageController` 图片上传（单个/批量）、获取、删除、收藏切换接口 |
| 管理员模块 | 实现 `AdminController` 用户管理、统计信息、密码重置、批量删除接口 |
| 文件存储服务 | 实现 `LocalFileService` 本地文件存储，处理图片保存和读取 |
| 数据库配置 | 配置 EF Core DbContext，创建数据库迁移，配置索引优化 |
| 分页功能 | 实现后端分页查询逻辑，返回 `PaginatedResult<T>` 格式 |
| 权限控制 | 配置 JWT Bearer 认证中间件，实现 `[Authorize]` 和角色权限 |
| GitHub CI/CD | 配置 GitHub Actions 自动构建和测试工作流 |

**涉及文件：**
- `src/UIPS.API/Controllers/AuthController.cs` - 认证接口
- `src/UIPS.API/Controllers/ImageController.cs` - 图片接口
- `src/UIPS.API/Controllers/AdminController.cs` - 管理员接口
- `src/UIPS.API/Services/LocalFileService.cs` - 文件服务
- `src/UIPS.API/Services/UipsDbContext.cs` - 数据库上下文
- `src/UIPS.API/Migrations/` - 数据库迁移
- `.github/workflows/` - CI/CD 配置

---

### 成员 A

**职责：前端登录与主界面**

| 工作内容 | 具体说明 |
|---------|---------|
| 登录界面 | 实现 `LoginView.xaml` 登录/注册表单，Material Design 样式 |
| 登录逻辑 | 实现 `LoginViewModel` 登录验证、注册、模式切换、错误提示 |
| 主窗口框架 | 实现 `MainWindow.xaml` 侧边栏导航、内容区域、用户信息显示 |
| 导航逻辑 | 实现 `MainWindow.xaml.cs` 页面切换、管理员权限判断、退出登录 |
| 会话管理 | 实现 `UserSession` Token 存储、持久化、自动登录 |
| 认证拦截器 | 实现 `AuthHeaderHandler` 自动为请求添加 JWT Token |

**涉及文件：**
- `src/UIPS.Client/Views/LoginView.xaml` - 登录界面
- `src/UIPS.Client/Views/LoginView.xaml.cs` - 登录代码
- `src/UIPS.Client/ViewModels/LoginViewModel.cs` - 登录逻辑
- `src/UIPS.Client/MainWindow.xaml` - 主窗口
- `src/UIPS.Client/MainWindow.xaml.cs` - 主窗口逻辑
- `src/UIPS.Client/Services/UserSession.cs` - 会话管理
- `src/UIPS.Client/Services/AuthHeaderHandler.cs` - Token 拦截器

---

### 成员 B

**职责：前端图库功能**

| 工作内容 | 具体说明 |
|---------|---------|
| 图库界面 | 实现 `DashboardView.xaml` 图片列表、上传区域、筛选区域布局 |
| 图片卡片 | 设计图片卡片样式，包含预览图、收藏按钮、删除按钮、文件名 |
| 上传功能 | 实现单文件上传、批量上传、文件选择对话框、上传进度显示 |
| 图片浏览 | 实现图片列表加载、按文件名筛选、刷新功能 |
| 图片预览 | 实现点击图片弹出大图预览，点击关闭 |
| 收藏功能 | 实现收藏/取消收藏切换，心形图标状态同步 |
| 分页控件 | 实现前端分页 UI，上一页/下一页按钮，页码显示 |
| 图库逻辑 | 实现 `DashboardViewModel` 所有图库相关命令和属性 |

**涉及文件：**
- `src/UIPS.Client/Views/DashboardView.xaml` - 图库界面
- `src/UIPS.Client/Views/DashboardView.xaml.cs` - 图库代码
- `src/UIPS.Client/ViewModels/DashboardViewModel.cs` - 图库逻辑
- `src/UIPS.Client/Services/IImageApi.cs` - 图片 API 接口

---

### 成员 C

**职责：前端管理员功能与 UI 资源**

| 工作内容 | 具体说明 |
|---------|---------|
| 管理员界面 | 实现 `AdminView.xaml` 统计卡片、用户列表、操作按钮布局 |
| 用户管理 | 实现用户列表显示、删除用户、重置密码功能 |
| 统计信息 | 实现系统统计数据展示（用户数、图片数、收藏数） |
| 管理员逻辑 | 实现 `AdminViewModel` 所有管理员相关命令和属性 |
| 主题样式 | 配置 Material Design 主题，定义颜色方案（深色主题） |
| 全局样式 | 定义全局样式资源，按钮、文本框、卡片等组件样式 |
| 转换器 | 实现 `BooleanToVisibilityConverter`、`InverseBooleanConverter` 等 |
| 应用图标 | 配置应用程序图标，窗口图标 |

**涉及文件：**
- `src/UIPS.Client/Views/AdminView.xaml` - 管理员界面
- `src/UIPS.Client/Views/AdminView.xaml.cs` - 管理员代码
- `src/UIPS.Client/ViewModels/AdminViewModel.cs` - 管理员逻辑
- `src/UIPS.Client/Services/IAdminApi.cs` - 管理员 API 接口
- `src/UIPS.Client/Resources/Colors.xaml` - 颜色定义
- `src/UIPS.Client/Resources/Styles.xaml` - 样式定义
- `src/UIPS.Client/Converters/` - 值转换器
- `src/UIPS.Client/Resources/app.ico` - 应用图标

---

## 分工汇总表

| 成员 | 主要职责 | 工作量占比 |
|------|---------|-----------|
| 组长 | 架构设计、技术选型、接口设计、数据模型 | 20% |
| ekkure | 后端全部业务逻辑、CI/CD | 25% |
| 成员 A | 前端登录、主窗口、会话管理 | 20% |
| 成员 B | 前端图库功能、分页 | 20% |
| 成员 C | 前端管理员功能、UI 资源 | 15% |

---

## 协作方式

- **版本控制**：Git + GitHub
- **分支策略**：main（主分支）+ feature/* （功能分支）
- **代码审查**：Pull Request 合并前需组长审核
- **沟通工具**：微信群 / 腾讯会议

---

## 技术栈总览

| 层级 | 技术 |
|------|------|
| 后端框架 | ASP.NET Core 8.0 Web API |
| 前端框架 | WPF (.NET 8.0) |
| 数据库 | SQLite + Entity Framework Core |
| 认证方式 | JWT Bearer Token |
| UI 库 | Material Design In XAML Toolkit |
| MVVM 框架 | CommunityToolkit.Mvvm |
| HTTP 客户端 | Refit |
| 密码加密 | BCrypt.Net |
